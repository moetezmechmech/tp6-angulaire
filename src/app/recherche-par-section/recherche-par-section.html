<div class="container mt-4">

  <!-- üîπ S√©lection de section -->
  <div class="row mb-4">
    <div class="col-md-4">
      <label for="idSection" class="form-label fw-bold">Filtrer par section :</label>
      <select
        id="idSection"
        class="form-select"
        [(ngModel)]="IdSection"
        (change)="onChange()"
      >
        <option value="0">-- Toutes les sections --</option>
        @for (sec of section; track sec.idCat) {
          <option [value]="sec.idCat">{{ sec.nomCat }}</option>
        }
      </select>
    </div>
  </div>

  <!-- üîπ Tableau des cours -->
  <div class="card shadow">
    <div class="card-body">
      @if (courss.length > 0) {
        <table class="table table-striped table-hover align-middle text-center">
          <thead class="table-light">
            <tr>
              <th>#</th>
              <th>ID Cours</th>
              <th>Nom du cours</th>
              <th>Prix</th>
              <th>Date de cr√©ation</th>
              <th>Section</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (cours of courss; track cours.idCours; let i = $index; let last = $last) {
              <tr>
                <td>{{ i + 1 }}</td>
                <td>{{ cours.idCours }}</td>
                <td>{{ cours.nomCours }}</td>
                <td>{{ cours.prixCours }}</td>
                <td>{{ cours.dateCreation | date: 'dd/MM/yyyy' }}</td>
                <td>
                  @if (cours.section) {
                    {{ cours.section.nomCat }}
                  } @else {
                    <span class="text-muted fst-italic">Pas de section</span>
                  }
                </td>
                <td>
                  <button class="btn btn-danger btn-sm me-2" (click)="supprimerCours(cours)">
                    Supprimer
                  </button>
                  <a class="btn btn-success btn-sm" [routerLink]="['/update-cours', cours.idCours]">
                    Modifier
                  </a>
                </td>
              </tr>
              @if (last) {
                <tr>
                  <td colspan="7" class="text-start fs-5 fw-bold">
                    Nombre total : {{ courss.length }}
                  </td>
                </tr>
              }
            }
          </tbody>
        </table>
      } @else {
        <div class="text-center text-muted mt-3">
          <h5>Aucun cours trouv√© pour cette section.</h5>
        </div>
      }
    </div>
  </div>
</div>
